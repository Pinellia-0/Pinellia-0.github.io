# 计算组成原理 第一章

本人是电子信息工程专业，自学408课程，计划考计算机方面的研究生。关于这类的笔记我会做一个系列，不定期更新（做笔记真的要花好多心思  悲  ）。

如有错漏之处，敬请指正。

---

使用教材：《计算机组成原理》第三版 唐朔飞 编著

​         		  《计算机组成原理——学习指导与习题解答》 第二版 唐朔飞 编著

---

  	关于“物联网”的看法： “物联网” 把感应器嵌入和装备到各种物体中（如：电网、铁路、桥梁、公路等）并且被普通连接形成的网络成为“物联网”；然后将“物联网”与现有的互联网整合实现人类社会与物理系统的整合形成智慧地球。

---





[TOC]



# 第 1 章 计算机系统的概论

## 1.1 计算机系统简介

### 1.1.1 计算机的软硬件概念

#### 1.1.1.1计算机系统

![计算机系统](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/521be2cced70ed649c204ee130f7b5c31.png)

​	软件

![软件的划分](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/d3414055249daf67759a4dd30d73d56811.png)

- 语言处理程序分类

- 汇编程序：将汇编语言程序翻译成对应的目标程序。

- 编译程序：将高级语言程序翻译成对应的目标程序。

- 解释程序：对高级语言程序逐句地进行翻译，产生对应的机器语言指令序列并执行。

- 链接程序（Linker）：将一个或多个目标程序与一个或多个相关的程序库（Library）组织在一起，产生可执行代码，并存入外存，在需要运行时再由操作系统加载后执行。

- 程序编译执行过程。

​	编译－链接－加载－执行

![](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/95963b278e3f20578ec5cfb3411c9021.png)

### 1.1.2 计算机系统的层次结构

![解析过程](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/40528edced275db2a96df91e93e82130.png)

补充:  对于系统复杂性的管理方法：抽象

何为抽象？ 隐藏系统中不重要的细节——David Harris

我们可以从物理构成的角度将计算机系统抽象成9层

| Application Software | programs               |                                                  |
| -------------------- | ---------------------- | ------------------------------------------------ |
| Operaling Systems    | device drivers         |                                                  |
| Architecture         | instructions registers |                                                  |
| Microarchitecture    | datapaths controllers  | 本科研究方向                                     |
| Logic                | adders memories        |                                                  |
| Digital Circuits     | 数字电路层             | 利用模拟电路层构建与门、非门...                  |
| Analog Circuits      | 模拟电路层             |                                                  |
| Devices              | 电子元件曾层           | 利用电子在不同物质当中的移动特征来构建电子元件。 |
| Physics              | electronics            | 利用量子机制和麦克斯韦方程来描述电子的移动。     |



通过程序员抽象：

![多级层次结构的计算机系统a](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/516d7e9b23d8ca4a7510e34d32065506.png)

在操作系统这一层是计算机硬件与软件的分界处。

![多级层次结构的计算机系统b](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/ef3750b67808a3947b13a8325c7d9355.png)

### 1.1.3 计算机体系结构和计算机组成

![结构与组成](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/66e59b118f4692cca164a709801d8e98.png)

## 1.2 计算机的基本组成

### 1.2.1 冯 诺依曼计算机的特点

1. 五大组成部件。运算器、计算器、控制器、输入设备和输出设备。
2. 指令和数据以同等地位存于存储器，可按地址寻访。
3. 指令和数据用二进制表示。
4. 指令由操作码和地址码组成。操作码用来表示操作的性质，地址码用来表示操作数在存储器中的位置。
5. 指令在存储器内按顺序存放。（存储程序）
6. 以运算器为中心，I/O设备与存储器间的数据传送通过运算器完成。

![典型的冯·诺依曼计算机结构框图](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/3bcd750384c4d9086d710eb40b9e85e0.png)

### 1.2.2 计算机硬件框图

1、以存储器为中心的计算机硬件框图

![以存储器为中心的计算机结构框图](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/5991b3eeaf8e648149764cb412525013.png)

**运算器：**用来完成算术运算和逻辑运算，并将中间结果暂存其中。

**存储器：**存放数据和程序。

**控制器：**用来控制、指挥程序和数据的输入、运行以及处理运算结果。

**输入设备：**将人们熟悉的信息形式转化为机器能识别的信息形式，常见的有键盘、鼠标。

**输出设备：**将机器运算结果转换为人们熟悉的信息形式，如打印机输出、显示器输出等。

现代计算机以存储器为中心。



2、现代计算机硬件框图

![现代计算机的组成框图](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/df1b529a6f948ec5faac54a9a18be570.png)

**ALU（算数逻辑单元）：**用来完成算数逻辑运算。

**CU（控制单元）：**用来解释存储器中的指令，并发出各种操作命令来执行指令。

I/O设备也受CU控制，用来完成相应的输入、输出操作。

### 1.2.3 计算机的工作步骤

#### 1.2.3.1上机前的准备

1、建立数学模型

2、确定计算方法

3、编制解题程序

操作码：表示机器所执行的各种操作，如取数、存数、加、减、乘、除、停机、打印等。

地址码：表示参加运算的数在存储器内的位置。

指令=操作码+地址码

#### 1.2.3.2计算机的工作过程

![细化的计算机组成框图](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/3ed974f8473e9bb57d8b60f93b2e9d2c.png)



1、存储器的基本组成

![存储体的逻辑结构](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/d22041f46810b9dcae55297711f9c499.png)

**MAR(存储器地址寄存器)：**存储器地址寄存器，反映存储单元个数。

**MDR(存储器数据寄存器)：**存储器数据寄存器，反映存储字长。

**存储单元：**用于存放一串二进制代码。（用于存放一个存储字的所有存储元集合）

**存储字：**存储单元中二进制代码的组合。（存放在一个存储单元中的二进制代码组合）

**存储字长：**存储单元中二进制代码的位数。（存放在一个存储单元中的二进制代码位数）

**存储容量：**存储器内二进制信息的位数。

每个存储单元赋予一个地址号，按地址寻访。 

![存储容量逻辑图](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/8f5bf32ddc94ad7fc161907e1c7dc1b7.png)



2、运算器的基本组成及操作过程

![运算器的组成结构以及运算表](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/aebaf02782115b1f7611201da2e865f9.png)

ACC(累加器)

MQ(乘商寄存器)

X(操作数寄存器)



3、控制器的基本组成

- 功能：控制指令的读出、解释和执行，中断事件的处理等 。

- 组成： ① 指令部件： 程序计数器PC—提供要执行的指令地址； 指令寄存器IR—寄存现行指令； 指令译码器ID—解释现行指令，产生相应的控制电位。 ② 时序部件：产生计算机运行所需的时序信号。 ③ 微操作信号发生器：产生执行指令的微操作控制信号。

- 程序：有序指令的集合，用来解决某一特定问题。

- 指令：机器完成某种操作的命令，包括操作码和地址码。

![控制器逻辑结构](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/111.png)

PC: 程序计数器

IR：指令计数器

CU: 控制单元



4、主机完成一条指令的过程

![存数指令](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/123.png)

![](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/5b1f565e79445f913e9ba39c3ce9039d.png)

1、将程序计数器PC中的指令地址送至地址寄存器MAR

2、根据MAR的地址指定存储器的存储单元

3、将存储单元中的值送至数据寄存器MDR（在控制器的控制下执行）

4、将MDR中的指令送至指令寄存器IR ————————————前四步取址操作———————————— 之后PC+1

5、将IR中的指令操作码送至控制器（CU），分析操作码和地址码 ———————————第五步分析指令操作———————————

6、将IR中的指令地址N送至MAR

7、根据MAR的地址，指定存储器的存储单元

8、将累加器ACC中的数据送至MDR（在控制器的控制下执行）

9、将MDR中的数据送到存储单元N，完成存数操作

同理：

![取数指令](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/112.png)

## 1.3 计算机硬件的技术指标

### 1.3.1 机器字长

- 机器字长：CPU一次能处理的数据的位数，通常与CPU中寄存器的位数有关

- 说明： 字长位数越多，精度越高，运算速度也越快 ¨NBSP;字长通常是8的整倍数，使能存放整数个字符的编码。例如字长为8、16、32、64位等。

### 1.3.2 存储容量

存储容量：存放二进制信息的总位数

![存储容量](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/3cb178615a297144696e8c4377c27b35.png)

### 1.3.3 运算速度

1、衡量方法1：平均运算速度Vm（指令平均执行速度）

​		a.定义：计算机每秒钟执行指令的条数 单位：MIPS（百万条指令每秒）

​		b.求法：先求平均运算时间（平均指令周期）Tm

![](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/f70863aeabb639ac68dd5c8e3dc8a67c.png)

式中：n：指令的种类；f i：第i种指令出现的频度(%) t i：第i种指令的指令周期(秒) 则平均运算速度： Vm＝1 ⁄ Tm

f:主频

Tm:平均指令周期（跟运算速度有关） T:CPU时钟周期（跟主频有关） T=1/f

Tm=CPI*T

Vm=f*IPC



2、衡量方法2：指令的平均周期数CPI 定义：计算机执行一条指令所需的时钟周期数 求法：

![](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/a842c682e922ee11b9bbe710011d8499.png)

相关参数：IPC(CPU 每一时钟周期内所执行的指令条数)

说明：一旦处理器设计完成，IPC值就不会再改变了(逻辑电路完全相同,IPC、CPI相同)

1/MHZ=μs

1/MIPS=μs

## 1.4 本书结构

![全书各章节之间的关系](https://cloud-chart-bed-1-1312894343.cos.ap-nanjing.myqcloud.com/bf9f852c56ba623358e4578de3a88232.png)

## 1.5 习题

1、计算机存储结构的基本单位是 比特（bit），常用单位是 字节（Byte）。

2、控制器由 程序计数器（PC存放当前欲执行指令地址） 、指令寄存器（IR存放当前欲执行的指令）、控制单元（CU分析当前指令所需要完成的操作） 组成; CU 负责指令译码，分析操作码和地址码。

3、固件 具有某种软件功能的硬件，一般用ROM实现（是将一部分软件永恒地存储于只读存储器中）。

4、常用的辅助存储器有 磁盘 和 磁带 等。

5、计算机硬件的主要技术指标包括 机器字长 、存储容量 、运算速度 。
